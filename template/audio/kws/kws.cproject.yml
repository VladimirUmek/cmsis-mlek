project:
  packs:
    - pack: ARM::CMSIS@^6.2.0
    - pack: ARM::CMSIS-RTX@^5.9.0

  output:
    type:
      - elf
      - bin
      - hex
      - map

  connections:
    - connect: Board Layer with Audio interface
      consumes:
        - CMSIS_VSTREAM_AUDIO_IN
      provides:
        - CMSIS-RTOS2

  define:
    - ACTIVATION_BUF_SZ: 131072

  add-path:
    - ./include/

  groups:

    - group: Documentation
      files:
        - file: ../README.md
 
    - group: Application Main
      files:
        - file: src/main_kws.cpp

    - group: Audio Source
      files:
        # Audio source implementation using CMSIS audio interface
        - file: src/AudioSource_Live.c
          for-context: \.*Live_Stream
        # Audio source implementation using data array
        - file: src/AudioSource_WAV.c
          for-context: \.*Data_Array
        # Audio sample ad data array
        - file: src/sample_audio.c
          for-context: \.*Data_Array

    - group: Configuration
      files:
        - file: ./config/AppConfiguration.h

  components:
    - component: CMSIS:OS Tick:SysTick
    - component: CMSIS:RTOS2:Keil RTX5&Source

  layers:
    - layer: $SolutionDir()$/ML/ml_layer.clayer.yml
      type: ML

    - layer: $Board-Layer$
      type: Board
