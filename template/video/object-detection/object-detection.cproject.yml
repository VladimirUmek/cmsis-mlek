project:
  packs:
    - pack: ARM::CMSIS@^6.2.0
    - pack: ARM::CMSIS-RTX@^5.9.0

  output:
    type:
      - elf
      - bin
      - hex
      - map

  connections:
    - connect: Board Layer with Video interface
      consumes:
        - CMSIS_VSTREAM_VIDEO_IN
        - CMSIS_VSTREAM_VIDEO_OUT
      provides:
        - CMSIS-RTOS2

  define:
    - ACTIVATION_BUF_SZ: 532480

  add-path:
    - ./include/

  groups:

    - group: Documentation
      files:
        - file: ../README.md

    - group: Application Main
      files:
        - file: src/main_object_detection.cpp

    - group: Image Source
      files:
        # Image source implementation using CMSIS video interface
        - file: src/VideoSource_Live.c
          for-context: \.*Live_Stream
        - file: src/image_processing_func.c
          for-context: \.*Live_Stream

        # Image source implementation using data array
        - file: src/VideoSource_File.c
          for-context: \.*Data_Array

        # Image sample as data array
        - file: src/sample_image.c
          for-context: \.*Data_Array

    - group: Configuration
      files:
        - file: config/AppConfiguration.h
        - file: config/VideoConfiguration.h

  components:
    - component: CMSIS:OS Tick:SysTick
    - component: CMSIS:RTOS2:Keil RTX5&Source

  layers:
    - layer: $SolutionDir()$/ML/ml_layer.clayer.yml
      type: ML

    - layer: $Board-Layer$
      type: Board
